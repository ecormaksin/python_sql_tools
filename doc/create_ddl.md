# 接続先のデータベースからDDLファイルを作成する処理(`create_ddl` モジュール)

## 実行手順

### 1. 各種ファイルの準備

- 設定ファイル（「[当スクリプト制御用設定ファイル](../README.md#122-当スクリプト制御用設定ファイル)」）</br></br>

  - `ddl_target` プロパティ（オブジェクトの配列）でDDLに含めるテーブル・ビューを指定します。  
    （未指定の場合は `database` プロパティのデータベース内すべてのテーブル・ビューが対象です。）  
    以下、オブジェクト内のプロパティの補足説明です。

      | プロパティ名         | 説明                                                                                    |
      |----------------|---------------------------------------------------------------------------------------|
      | schema         | DDLを作成したいデータベースを指定します。<br/>接続ユーザーに複数データベースの参照権限がある場合、<br/>複数のデータベースのDDLを1ファイルに出力できます。 |
      | include_tables | DDLに含めたいテーブル・ビューの方が少ない場合、このプロパティにテーブル名・ビュー名を配列で指定します。                                 |
      | exclude_tables | DDLから除外したいテーブル・ビューの方が少ない場合、このプロパティにテーブル名・ビュー名を配列で指定します。                               |

### 2. コマンドの実行

`python -m create_ddl --help` で実行時のパラメーターを確認できます。

以下は日本語で表にまとめたものです。

| ショート | ロング           | 必須 | 説明                                                                                                                           |
|------|---------------|:--:|------------------------------------------------------------------------------------------------------------------------------|
| -C   | --db-config   | －  | データベース接続用の設定ファイル（.json）のパスを指定します。<br/>未指定の場合、プロジェクト ルートの 'db_config.json' を検索します。                                            |
| -d   | --destination | －  | DDLファイルの出力先フォルダーのパスを指定します。<br/>未指定の場合は一時フォルダ（`tempfile.gettempdir()`）の`python_sql_tools/ddl/<実行日時(%Y%m%d-%H%M%S-%f)>`に出力します。 |
| -n   | --file-name   | －  | DDLのファイル名を指定します。<br/>未指定の場合は `ddl.sql` で出力します。                                                                               |
