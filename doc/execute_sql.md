# 指定フォルダー配下のSQLファイルを再帰的に実行する処理（`execute_sql` モジュール）

## 実行手順

### 1. 各種ファイルの準備

- 設定ファイル（「[DB接続用設定ファイル](../README.md#123-db接続用設定ファイル)」参照）

- 実行するSQLファイルを格納したフォルダー
  - ファイル名昇順で処理します。
  - 指定フォルダーのサブフォルダーも再帰的に処理します。
  - [`create_dml`モジュール](./create_dml.md) ではINSERT文のDMLファイルを作成しますが、このモジュールでは他のDDL・DMLでも実行できます。

### 2. コマンドの実行

`python -m execute_sql --help` で実行時のパラメーターを確認できます。

以下は日本語で表にまとめたものです。

| ショート | ロング         | 必須 | 説明                                                                                                                                   |
|------|-------------|:--:|--------------------------------------------------------------------------------------------------------------------------------------|
| -s   | --source    | ○  | SQLファイルを格納したフォルダーのパスを指定します。                                                                                                          |
| -C   | --db-config | －  | データベース接続用の設定ファイル（.json）のパスを指定します。<br/>未指定の場合、プロジェクト ルートの 'db_config.json' を検索します。                                                    |
| -d   | --delimiter | －  | SQLファイルにおけるステートメントの区切り文字を指定します。<br/>未指定の場合は ';' で判断します。                                                                              |
| -l   | --log       | －  | ログ ファイルの出力先フォルダーのパスを指定します。<br/>未指定の場合は一時フォルダ（`tempfile.gettempdir()`）の`python_sql_tools/execute_sql/<実行日時(%Y%m%d-%H%M%S-%f)>`に出力します。 |
